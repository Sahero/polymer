<link rel="import" href="../../bower_components/polymer/polymer-element.html">

<dom-module id="mai-contacts-list-data">

    <template>
        <app-localstorage-document key="token" data="{{tokenData}}" storage="window.localStorage"></app-localstorage-document>

        <iron-ajax
                auto
                id="getContactsDetail"
                method="get"
                url="[[_computeURL()]]"
                headers$='{"FM-data-token": "[[tokenData.token]]"}'
                handle-as="json"

                on-response="listLoaded"
        ></iron-ajax>
    </template>

    <script>
        (function() {
            class MaiContactsListData extends Polymer.Element {
                static get is() {
                    return 'mai-contacts-list-data';
                }

                static get properties() {
                    return {
                        contactsData: {
                            type: Array,
                            notify: true,
                        }
                    }
                }

                listLoaded(data) {
                    if(data.detail.response!==null) {
                        this.contactsData = data.detail.response;
                        console.log(this.contactsData);
                    }
                }

                _computeURL() {
                    return `https://localhost:3000/fm/getList/L31_CONTACTS_List_View`;
                }

            }
            window.customElements.define(MaiContactsListData.is, MaiContactsListData);
        }());
    </script>
</dom-module>